# String.intern() 方法总结

## 1. 基本概念

| 概念 | 描述 |
|------|------|
| 字符串常量池 | JVM中的一个特殊内存区域，用于存储字符串常量，可以实现字符串重用，节省内存 |
| intern()方法 | String类的native方法，用于将字符串对象的引用存入常量池 |

## 2. JDK版本差异

| 版本 | 实现机制 | 特点 |
|------|----------|------|
| JDK 6 | 将字符串内容复制到常量池 | 在常量池中创建新的字符串对象 |
| JDK 7+ | 将字符串对象的引用存入常量池 | 不会复制对象，只存储引用，更节省内存 |

## 3. 常见场景分析

| 场景 | 代码示例 | 结果 | 原因 |
|------|----------|------|------|
| 直接声明字符串 | `String s = "a";` | 直接进入常量池 | 编译期就确定，自动进入常量池 |
| new创建字符串 | `String s = new String("a");` | 在堆中创建 | 运行期创建新对象，不进入常量池 |
| 拼接已有字符串 | `String s3 = new String("a") + new String("a");` | 在堆中创建新对象 | 运行期动态拼接，结果在堆中 |

## 4. intern()方法效果

| 调用场景 | 常量池状态 | 返回值 | 示例结果 |
|----------|------------|--------|----------|
| 常量池已存在 | 已有相同内容 | 返回常量池中的引用 | `s1 == s2 // false` |
| 常量池不存在 | 将当前引用放入 | 返回当前对象的引用 | `s3 == s4 // true` |

## 5. 使用建议

| 建议 | 说明 |
|------|------|
| 谨慎使用 | intern()方法可能会占用大量常量池空间 |
| 性能考虑 | 频繁调用可能影响性能，建议在初始化阶段使用 |
| 场景选择 | 适用于大量重复字符串的场景，如配置信息、字典数据等 |